<ng-template let-reference="item" #referenceTemplate>
  <re-reference-brief [reference]="reference"></re-reference-brief>
</ng-template>

<ng-template let-item="item" #affiliationAutocompleteTemplate>
  <re-affiliation-brief [affiliation]="item.payload"></re-affiliation-brief>
</ng-template>

<ng-template #refExtractTemplate>
  <re-ref-extract-actions></re-ref-extract-actions>
</ng-template>

<ng-template #authorExtractTemplate>
  <re-author-extract-actions></re-author-extract-actions>
</ng-template>

<re-holdingpen-toolbar [hasProblem]="hasProblem" [workflowObject]="workflowObject"></re-holdingpen-toolbar>
<div id="editor-container">
  <json-editor *ngIf="workflowObject && schema"
    [(record)]="workflowObject.metadata"
    [(jsonPatches)]="workflowObject._extra_data.conflicts"
    [schema]="schema"
    [config]="config"
    (validationProblems)="onValidationProblems($event)"    
    [templates]="{
      referenceTemplate: referenceTemplate,
      affiliationAutocompleteTemplate: affiliationAutocompleteTemplate,
      refExtractTemplate: refExtractTemplate,
      authorExtractTemplate: authorExtractTemplate
    }">
  </json-editor>
</div>
